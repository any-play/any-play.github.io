<!DOCTYPE html>
<html>
  <head>
    <title>AnyPlay</title>

    <!-- Le meta -->
    <meta charset="utf-8">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="referrer" content="no-referrer">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#009688">
    <meta name="apple-mobile-web-app-title" content="AnyPlay">
    <meta name="apple-mobile-web-app-capable" content="yes">

    <!--
      Criteria to show the banner
      Be visited by the user twice, over two separate days during the course of two weeks.
      Or
      enable chrome://flags/#bypass-app-banner-engagement-checks
    -->
    <link rel="manifest" href="/manifest.json">
    <link rel="apple-touch-icon" href="/img/logo.png">
    <!-- <link rel="apple-touch-startup-image" href="/launch.png"> -->

    <!-- Le styles -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="/css/main.css">
    <link rel="stylesheet" href="/css/dialog.css">
    <link rel="stylesheet" href="https://vjs.zencdn.net/5.15.1/video-js.css">
    <link rel="stylesheet" href="/css/videojs-chromecast.css">
    <link rel="stylesheet" href="/css/videojs-airplay.css">

    <!-- Le fav and touch icons -->
    <link href="/img/logo.png" rel="shortcut icon">
  </head>
  <body>

    <div id="loader" hidden>
      <svg class="circular" viewBox="25 25 50 50">
        <circle class="path" cx="50" cy="50" r="20" fill="none" stroke-width="4" stroke-miterlimit="10"/>
      </svg>
    </div>

    <!-- header
    ================================================== -->
    <header id="jumbo">
      <!-- <h3>AnyPlay</h3> -->
      <nav>
        <a href="/">Start</a>
        <a href="/plugins">Plugins</a>
      </nav>
    </header>

    <main id="$overview"></main>

    <dialog id="$settingsDialog">
      <form class="shadow-2dp" onsubmit="app._updateSettings(event)" method="dialog" autocomplete="off" style="width: 300px">
        <header><h3></h3></header>
        <section></section>
        <footer>
          <button type="reset" value="Reset">Reset</button>
          <button type="submit">Save</button>
        </footer>
      </form>
    </dialog>

    <dialog id="_alert">
      <form class="shadow-2dp" method="dialog">
        <header><h3></h3></header>
        <section>
          <p></p>
          <details>
            <summary>Stack Trace</summary>
            <code></code>
          </detail>
        </section>
        <footer>
          <button type="submit" value="ok" autofocus>OK</button>
        </footer>
      </form>
    </dialog>


    <!-- list item
    ================================================== -->
    <template id="$pluginForm">
      <section class="card">
        <h4 class="mdl-cell mdl-cell--12-col">Add Plugin</h4>
        <form method="post" onsubmit="app.submitPlugin(event)">
          <textarea ondrop="app.filesDroped(event)" id="_code" placeholder="Enter or drag 'n drop a url, code or a file here, Then submit" name="code" required rows="3"></textarea>
          <input id="_file" type="file" accept="text/javascript" hidden onchange="app.loadPlugin(event)">
          <button id="_fileAdd" onclick="_file.click()" type="button">
            Choose file
          </button>
          <button onclick="_code.value = location.origin + '/js/sample.js'" type="button">
            load sample.js
          </button>
          <button type="submit">
            Add
          </button>
        </form>
      </section>
    </template>


    <!-- link item
    ================================================== -->
    <template id="$linkItem">
      <li class="linkItem card">
        <img>
        <a></a>
      </li>
    </template>


    <!-- link item
    ================================================== -->
    <template id="$horizontalMenu">
      <section class="horizontalMenu">
        <h3>title</h3>
        <ul></ul>
      </section>
    </template>

    <!-- list item
    ================================================== -->
    <template id="$pluginItem">
      <section class="pluginItem card">
        <a href="name" class="name"></a>
        <button type="button" onclick="app._delete(event)">Delete</button>
        <button type="button" onclick="app._openSettings(event)">Settings</button>
      </section>
    </template>

    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script>
      // Rewriting HTTP url to HTTPS
      // AnyPlay.io enforce https and don't allow mixed content
      XMLHttpRequest = class XMLHttpRequest extends window.XMLHttpRequest {
        open(method, url) {
          // Force
          return super.open(method, url.replace(/^http:\/\//i, 'https://'))
        }
      }
    </script>
    <script src="https://www.gstatic.com/cv/js/sender/v1/cast_sender.js"></script>
    <script src="/js/libs/core.min.js"></script>
    <script src="/js/libs/urlsearchparams.js"></script>
    <script src="/js/libs/streams.min.js"></script>
    <script src="/js/libs/dialog.js"></script>
    <script src="/js/libs/screw-filereader.js"></script>
    <script src="/js/libs/fetch-headers.min.js"></script>
    <script src="/js/libs/fetch.js"></script>
    <script src="/js/libs/videojs/videojs.min.js"></script>
    <script src="/js/libs/videojs/videojs-dash.min.js"></script>
    <script src="/js/libs/videojs/videojs-airplay.js"></script>
    <script src="/js/libs/videojs/videojs-contrib-quality-levels.min.js"></script>
    <script src="/js/libs/videojs/videojs-contrib-hls.js"></script>
    <script src="/js/libs/videojs/videojs-contrib-dash.js"></script>
    <script src="/js/libs/videojs/videojs-chromecast.min.js"></script>
    <script src="/js/hybrid-app.js"></script>
    <script src="/js/web-app.js"></script>
    <script>
      dialogPolyfill.registerDialog(document.querySelector('dialog'))
      dialogPolyfill.registerDialog(document.querySelector('#_alert'))
    </script>
    <button hidden is="google-cast-button"></button>

  </body>
</html>
